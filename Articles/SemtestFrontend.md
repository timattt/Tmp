# ТЗ для дизайна проекта semtest

*Версия ТЗ:* ```3```

![image-Photoroom](https://github.com/user-attachments/assets/aa6ec9da-faa0-492d-92d6-cc0350905f54)

**© Rutesil**

Сайт, на котором можно запустить тест для нескольких человек. Люди отвечают на вопросы, потом результат виден. 
Тест длится фиксированное время. Причем, условие вопроса участникам не показывается в их браузерах. 
Оно показывается только в браузере создателя теста, и он через проектор показывает его всем (привет, лекционные тесты по квантмеху) 
Такой механизм нужен, чтобы проводить тесты в аудитории, таким образом, чтобы только те, кто есть на месте могли бы его проходить.

Макеты [тут]([https://www.figma.com/design/530tYYVWV4cDioTnHRBT4r/type-5?node-id=0-1&node-type=canvas&t=5YOEHYQAIKCEOncO-0](https://www.figma.com/design/kJYp9y4XbIO32IpfYZKJne/type-5-%D0%A1%D0%9E%D0%93%D0%9B%D0%90%D0%A1%D0%9E%D0%92%D0%90%D0%9D%D0%98%D0%95?node-id=0-1&node-type=canvas&t=aCtBwGsFLAdBfFmD-0))


Документация к бекенду [тут](https://backend.quiz.mipt.io/api/v1/public/webjars/swagger-ui/index.html)

Также надо добавить возможность менять язык.

### Технологический стек

TypeScript, React, Redux (toolkit/thunk)

### Backend

Вот [тут](https://backend.quiz.mipt.io/api/v1/public/webjars/swagger-ui/index.html) есть **OpenApi документация** для Rest Api.
Там есть CRUD операции для работы с проектами. А также два эндпоинта для компиляции кода - один открыт для всех без аутентификации,
но там ограничено количество попыток (после окончания попыток будет код 425 - тогда нужно показать окно о том, что надо залогиниться). Второй эндпоинт
компилирует код из проекта аутентифицированного пользователя.

Отдельно отметим, что есть еще сервис единой авторизации (SSO) вот [тут](https://sso.mipt.io/public/pages/login). Аутентификация должна делаться через него.
Используется протокол oauth2. Для удобства взаимодействия нужно использовать библиотеку **oauth2-client**.

* Эндпоинт для авторизации: ```https://sso.mipt.io/api/v1/public/oauth2/authorize```
* Эндпоинт для получения токена: ```https://sso.mipt.io/api/v1/public/oauth2/token```
* Эндпоинт для интроспекции токена: ```https://sso.mipt.io/api/v1/public/oauth2/introspect```
* ClientId: ```type5release```
* ClientSecret: ```fjifijf74438fjkdkdldld```

Фактически после нажатия на кнопку login делается редайрект на SSO, там пользователь аутентифицируется, после чего SSO пользователя возвращает в приложение вместе с кодом. Код обменивается на токен, а потом с этим токеном можно обращаться к бекенду - весь этот процесс сильно упрощен библиотекой **oauth2-client**.

### Термины

* Тест - группа вопросов. Тест может создать пользователь
* Запуск теста - указание времени, когда конкретный тест можно будет пройти. Запусков может быть несколько.
* семинарский тест - тест, который можно пройти только находясь очно на семинаре. Это значит, что текст вопросов и вариантов ответа будет виден только создателю теста. А обычным участникам виден не будет. Это основная фича приложения. То есть люди приходят в аудиторию, подключаются к тесту, далее им показываются на их компьютерах только варианты ответа, а на компьютере преподавателя, который создал тест видны условия.
* публичный тест - тест, который отображается всем пользователям на главном экране.

## Страницы

### Страница для незалогиненного пользователя

Тут написано название и описание приложения, а также кнопка для логина - она ведет на [sso](https://sso.mipt.io/public/pages/login)

### Главная страница

*semtest.mipt.io/*

Здесь пользователь может увидеть список публичных запущенных тестов. А также список тестов, в которых он уже участвует.

### Мои тесты

*semtest.mipt.io/user/tests*

Здесь пользователь видит список своих тестов, которые он создал. Он может тест запустить - в этот момент появляется панель, где нужно выбрать дату и время для запуска.
Справа отображаются активные запуски. Еще можно получить ссылку на запущенный тест.

### Создание теста

*semtest.mipt.io/user/tests/new*

Здесь пользователь может создать тест. Указать вопросы, указать варианты ответа. Важно добавить выбор теста семинарским или нет, публичным или нет, а также отмечать правильный вариант ответа (их может быть несколько).

### Прохождение теста

*semtest.mipt.io/{id}*

Здесь нужно отобразить информацию о запуске теста.
* Если тест еще не стартовал, то указать время начала.
* Если тест идет, то отобразить список вопросов и таймер. Если включен режим семинарского теста, то текст вопроса и вариантов ответа не показывать, только номера. Также нужно показывать подсказку, которая это объясняет.
* Если тест завершился, то нужно отобразить кол правильных ответов. Также надо сделать вариант, где развернуто отображаются все вопросы с текстом и выделенными правильными и неправильными ответами пользователя (этого нет в черновом макете, но сделать надо)
